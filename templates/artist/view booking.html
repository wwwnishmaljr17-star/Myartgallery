{% extends 'artist/index2.html' %}
{% block body %}
<div class="card shadow-2xl border-0 rounded-2xl overflow-hidden">
    <div class="card-header py-4 px-5 border-0 d-flex justify-content-between align-items-center"
        style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
        <h4 class="m-0 font-weight-bold text-white"><i class="fas fa-calendar-check mr-2"></i>Design Bookings</h4>
        <span class="badge badge-light-success text-success font-weight-bold px-3 py-2 rounded-pill shadow-sm">
            <i class="fas fa-info-circle mr-1"></i>Total: {{ data|length }}
        </span>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead class="bg-gray-50 border-bottom">
                    <tr>
                        <th class="px-5 py-3 text-uppercase small font-weight-bold text-muted">Client</th>
                        <th class="py-3 text-uppercase small font-weight-bold text-muted">Schedule Date</th>
                        <th class="py-3 text-uppercase small font-weight-bold text-muted">Booking Date</th>
                        <th class="py-3 text-uppercase small font-weight-bold text-muted">Booking Status</th>
                        <th class="py-3 text-uppercase small font-weight-bold text-muted">Payment</th>
                        <th class="px-5 py-3 text-center text-uppercase small font-weight-bold text-muted">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white">
                    {% for i in data %}
                    <tr class="transition-all hover-bg-light">
                        <td class="px-5 py-4">
                            <div class="d-flex align-items-center">
                                <div class="avatar-circle mr-3 bg-light-primary text-primary font-weight-bold">
                                    {{ i.USERID.name|first|upper }}
                                </div>
                                <div class="font-weight-bold text-dark">{{ i.USERID.name }}</div>
                            </div>
                        </td>
                        <td class="py-4">
                            <span class="text-muted"><i class="far fa-calendar-alt mr-2 text-info"></i>{{
                                i.SCHEDULE.date }}</span>
                        </td>
                        <td class="py-4">
                            <span class="text-muted"><i class="far fa-clock mr-2 text-info"></i>{{ i.date }}</span>
                        </td>
                        <td class="py-4">
                            {% if i.status == "pending" %}
                            <span class="badge badge-warning-soft px-3 py-2 rounded-pill font-weight-bold">
                                <i class="fas fa-hourglass-start mr-1"></i>Pending
                            </span>
                            {% elif i.status == "accepted" %}
                            <span class="badge badge-success-soft px-3 py-2 rounded-pill font-weight-bold">
                                <i class="fas fa-check-circle mr-1"></i>Accepted
                            </span>
                            {% else %}
                            <span class="badge badge-secondary-soft px-3 py-2 rounded-pill font-weight-bold">{{ i.status
                                }}</span>
                            {% endif %}
                        </td>
                        <td class="py-4">
                            {% if i.payment_status == "paid" %}
                            <span class="badge badge-success-soft px-3 py-2 rounded-pill font-weight-bold text-success">
                                <i class="fas fa-coins mr-1"></i>Paid
                            </span>
                            {% else %}
                            <span
                                class="badge badge-light-secondary px-3 py-2 rounded-pill font-weight-bold text-muted">
                                <i class="fas fa-clock mr-1"></i>Unpaid
                            </span>
                            {% endif %}
                        </td>
                        <td class="px-5 py-4 text-center">
                            <div class="btn-group shadow-sm rounded-pill overflow-hidden border">
                                {% if i.status == "pending" %}
                                <a href="/accept_design/{{ i.id }}"
                                    class="btn btn-white btn-sm px-4 border-right hover-success" title="Accept Booking">
                                    <i class="fas fa-check text-success"></i>
                                </a>
                                <a href="/reject_design/{{ i.id }}" class="btn btn-white btn-sm px-4 hover-danger"
                                    title="Reject Booking">
                                    <i class="fas fa-times text-danger"></i>
                                </a>
                                {% elif i.status == "accepted" %}
                                <a href="/reject_design/{{ i.id }}" class="btn btn-white btn-sm px-5 hover-danger"
                                    title="Cancel Booking">
                                    <i class="fas fa-times text-danger mr-2"></i>Reject
                                </a>
                                {% else %}
                                <span class="text-muted small px-3">Archived</span>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="text-center py-5">
                            <div class="empty-booking-state py-5 px-4 mx-3 rounded-2xl border-dashed-2">
                                <div class="icon-pulse mb-4 mx-auto bg-light-success text-success">
                                    <i class="fas fa-calendar-times fa-3x"></i>
                                </div>
                                <h4 class="font-weight-bold text-dark mb-2">No Active Bookings</h4>
                                <p class="text-muted mb-0 mx-auto" style="max-width: 350px;">When collectors book your
                                    scheduled time, they'll appear here. Keep your schedule updated to attract more
                                    clients!</p>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    .rounded-2xl {
        border-radius: 1.5rem !important;
    }

    .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
    }

    .bg-gray-50 {
        background-color: #f9fafb;
    }

    .transition-all {
        transition: all 0.3s ease;
    }

    .hover-bg-light:hover {
        background-color: #f8faff;
    }

    .avatar-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .bg-light-primary {
        background: rgba(78, 115, 223, 0.1);
    }

    .badge-light-success {
        background: rgba(255, 255, 255, 0.2);
    }

    .badge-warning-soft {
        background: #fff7ed;
        color: #c2410c;
        border: 1px solid #ffedd5;
    }

    .badge-success-soft {
        background: #ecfdf5;
        color: #047857;
        border: 1px solid #d1fae5;
    }

    .badge-secondary-soft {
        background: #f9fafb;
        color: #4b5563;
        border: 1px solid #f3f4f6;
    }

    .btn-white {
        background: #fff;
        border: 0;
    }

    .hover-success:hover {
        background: #ecfdf5 !important;
    }

    .hover-danger:hover {
        background: #fef2f2 !important;
    }

    .border-dashed-2 {
        border: 2px dashed #e2e8f0;
    }

    .icon-pulse {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>
{% endblock %}